<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>–¢–∞–±–ª–∏—Ü—è –≤—ñ–¥–≤—ñ–¥—É–≤–∞–Ω–æ—Å—Ç—ñ –∫–ª—É–±—É "–Ø–©–Ü–†–ö–ê"</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background-color: #f9f9f9;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background-color: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h1, h2 {
      color: #2c3e50;
      text-align: center;
    }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 1px solid #eee;
    }
    .clock {
      font-size: 1.2em;
      font-weight: bold;
      color: #2c3e50;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
      table-layout: fixed;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 8px 4px;
      text-align: center;
      font-size: 0.9em;
    }
    th {
      background-color: #3498db;
      color: white;
      position: sticky;
      top: 0;
    }
    .name-column {
      width: 150px;
    }
    .day-column {
      width: 30px;
    }
    .total-column, .payment-column, .balance-column {
      width: 70px;
      background-color: #eaf2f8;
    }
    input[type="text"] {
      width: 95%;
      padding: 5px;
      border: 1px solid #ddd;
      border-radius: 4px;
    }
    input[type="number"] {
      width: 95%;
      padding: 5px;
      border: 1px solid #ddd;
      border-radius: 4px;
      text-align: center;
    }
    input[type="checkbox"] {
      transform: scale(1.2);
      cursor: pointer;
    }
    .weekend {
      background-color: #ffe6e6;
    }
    button {
      background-color: #3498db;
      color: white;
      border: none;
      padding: 10px 15px;
      margin: 5px;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    button:hover {
      background-color: #2980b9;
    }
    .button-group {
      display: flex;
      justify-content: center;
      margin: 15px 0;
      flex-wrap: wrap;
    }
    .calculator {
      background-color: #eaf2f8;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    .calculator table {
      margin-bottom: 0;
    }
    .month-selector {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 15px;
    }
    .month-selector select {
      padding: 8px;
      border-radius: 4px;
      border: 1px solid #ddd;
      margin-left: 10px;
      font-size: 1em;
    }
    .table-container {
      overflow-x: auto;
      margin-top: 20px;
    }
    .hidden-day {
      display: none;
    }
    .price-display {
      font-weight: bold;
      text-align: center;
      margin: 10px 0;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>–ö–ª—É–± "–Ø–©–Ü–†–ö–ê" - –û–±–ª—ñ–∫ –≤—ñ–¥–≤—ñ–¥—É–≤–∞–Ω–æ—Å—Ç—ñ</h1>
      <div class="clock">üïí <span id="clock"></span></div>
    </div>
    
    <div class="month-selector">
      <label for="monthSelect">üìÖ –ú—ñ—Å—è—Ü—å:</label>
      <select id="monthSelect" onchange="changeMonth()">
        <option value="0" data-days="31">–°—ñ—á–µ–Ω—å</option>
        <option value="1" data-days="28">–õ—é—Ç–∏–π</option>
        <option value="2" data-days="31">–ë–µ—Ä–µ–∑–µ–Ω—å</option>
        <option value="3" data-days="30">–ö–≤—ñ—Ç–µ–Ω—å</option>
        <option value="4" data-days="31">–¢—Ä–∞–≤–µ–Ω—å</option>
        <option value="5" data-days="30">–ß–µ—Ä–≤–µ–Ω—å</option>
        <option value="6" data-days="31">–õ–∏–ø–µ–Ω—å</option>
        <option value="7" data-days="31">–°–µ—Ä–ø–µ–Ω—å</option>
        <option value="8" data-days="30">–í–µ—Ä–µ—Å–µ–Ω—å</option>
        <option value="9" data-days="31">–ñ–æ–≤—Ç–µ–Ω—å</option>
        <option value="10" data-days="30">–õ–∏—Å—Ç–æ–ø–∞–¥</option>
        <option value="11" data-days="31">–ì—Ä—É–¥–µ–Ω—å</option>
      </select>
      <input type="number" id="yearInput" min="2020" max="2050" value="2025" style="width: 80px; margin-left: 10px;" onchange="changeMonth()">
    </div>
    
    <div class="price-display">
      <label for="dailyRate">–í–∞—Ä—Ç—ñ—Å—Ç—å –∑–∞ –¥–µ–Ω—å: </label>
      <input type="number" id="dailyRate" value="500" style="width: 100px;" onchange="updateAllTotals()"> –≥—Ä–Ω
    </div>

    <div class="calculator">
      <h3>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –≤–∞—Ä—Ç–æ—Å—Ç—ñ</h3>
      <table>
        <thead>
          <tr>
            <th>–î–Ω—ñ–≤ –≤—ñ–¥–≤—ñ–¥—É–≤–∞–Ω–æ</th>
            <th>–í–∞—Ä—Ç—ñ—Å—Ç—å –∑–∞ –¥–µ–Ω—å</th>
            <th>–ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><input type="number" id="daysAttended" min="0" max="31" value="0" oninput="updateCalculator()"></td>
            <td><input type="number" id="dailyRateCalc" value="500" readonly></td>
            <td><input type="number" id="totalPayment" readonly></td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="button-group">
      <button onclick="saveTableData()">üíæ –ó–±–µ—Ä–µ–≥—Ç–∏ –¥–∞–Ω—ñ</button>
      <button onclick="clearTableData()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç–∏ –¥–∞–Ω—ñ</button>
      <button onclick="addRow()">‚ûï –î–æ–¥–∞—Ç–∏ –¥–∏—Ç–∏–Ω—É</button>
      <button onclick="removeLastRow()">‚ûñ –í–∏–¥–∞–ª–∏—Ç–∏ –æ—Å—Ç–∞–Ω–Ω—ñ–π —Ä—è–¥–æ–∫</button>
      <button onclick="exportToPDF()">üìÑ –ï–∫—Å–ø–æ—Ä—Ç –≤ PDF</button>
    </div>

    <div class="table-container">
      <table id="attendanceTable">
        <thead>
          <tr>
            <th class="name-column">–Ü–º'—è –¥–∏—Ç–∏–Ω–∏</th>
            <th class="name-column">–Ü–º'—è –¥–∏—Ç–∏–Ω–∏</th>
            <th class="name-column">–Ü–º'—è –¥–∏—Ç–∏–Ω–∏</th>
            <!-- –î–Ω—ñ –º—ñ—Å—è—Ü—è –±—É–¥—É—Ç—å –¥–æ–¥–∞–Ω—ñ —á–µ—Ä–µ–∑ JavaScript -->
          </tr>
        </thead>
        <tbody>
          <!-- –†—è–¥–∫–∏ –±—É–¥—É—Ç—å –¥–æ–¥–∞–Ω—ñ —á–µ—Ä–µ–∑ JavaScript -->
        </tbody>
      </table>
    </div>
  </div>

  <script>
    // –ì–ª–æ–±–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ
    const table = document.getElementById('attendanceTable');
    const MAX_ROWS = 20;
    const DAILY_RATE = 500; // –ë–∞–∑–æ–≤–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å –∑–∞ –¥–µ–Ω—å
    let currentMonthDays = 31;
    let weekendDays = []; // –ú–∞—Å–∏–≤ –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –≤–∏—Ö—ñ–¥–Ω–∏—Ö –¥–Ω—ñ–≤
    
    // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏
    function initPage() {
      // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –ø–æ—Ç–æ—á–Ω–∏–π –º—ñ—Å—è—Ü—å –≤ —Å–µ–ª–µ–∫—Ç–æ—Ä—ñ
      const now = new Date();
      document.getElementById('monthSelect').value = now.getMonth();
      document.getElementById('yearInput').value = now.getFullYear();
      document.getElementById('dailyRate').value = DAILY_RATE;
      document.getElementById('dailyRateCalc').value = DAILY_RATE;
      
      // –û–Ω–æ–≤–ª—é—î–º–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–Ω—ñ–≤ –º—ñ—Å—è—Ü—è
      setupTable();
      
      // –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –∑–±–µ—Ä–µ–∂–µ–Ω—ñ –¥–∞–Ω—ñ
      loadTableData();
      
      // –û–Ω–æ–≤–ª—é—î–º–æ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
      updateCalculator();
      
      // –ó–∞–ø—É—Å–∫–∞—î–º–æ –≥–æ–¥–∏–Ω–Ω–∏–∫
      updateClock();
      setInterval(updateClock, 1000);
    }
    
    // –û–Ω–æ–≤–ª–µ–Ω–Ω—è –≥–æ–¥–∏–Ω–Ω–∏–∫–∞
    function updateClock() {
      const now = new Date();
      const hours = String(now.getHours()).padStart(2, '0');
      const minutes = String(now.getMinutes()).padStart(2, '0');
      const seconds = String(now.getSeconds()).padStart(2, '0');
      document.getElementById('clock').textContent = `${hours}:${minutes}:${seconds}`;
    }
    
    // –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–∞–±–ª–∏—Ü—ñ: —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤ –¥–ª—è –¥–Ω—ñ–≤ —ñ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –ø–µ—Ä—à–æ–≥–æ —Ä—è–¥–∫–∞
    function setupTable() {
      // –û—Ç—Ä–∏–º—É—î–º–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –¥–Ω—ñ–≤ —É –º—ñ—Å—è—Ü—ñ
      const monthIndex = parseInt(document.getElementById('monthSelect').value);
      const year = parseInt(document.getElementById('yearInput').value);
      
      // –í–∏–∑–Ω–∞—á–∞—î–º–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –¥–Ω—ñ–≤ —É –º—ñ—Å—è—Ü—ñ
      const daysInMonth = new Date(year, monthIndex + 1, 0).getDate();
      currentMonthDays = daysInMonth;
      
      // –û—á–∏—â–∞—î–º–æ –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–∞–±–ª–∏—Ü—ñ, –∑–∞–ª–∏—à–∞—é—á–∏ —Ç—ñ–ª—å–∫–∏ –ø–µ—Ä—à–∏–π —Å—Ç–æ–≤–ø–µ—Ü—å (–Ü–º'—è –¥–∏—Ç–∏–Ω–∏)
      const headerRow = table.querySelector('thead tr');
      while (headerRow.children.length > 1) {
        headerRow.removeChild(headerRow.lastChild);
      }
      
      // –ó–∞–ø–æ–≤–Ω—é—î–º–æ –≤–∏—Ö—ñ–¥–Ω—ñ –¥–Ω—ñ
      weekendDays = [];
      for (let day = 1; day <= daysInMonth; day++) {
        const date = new Date(year, monthIndex, day);
        const dayOfWeek = date.getDay();
        if (dayOfWeek === 0 || dayOfWeek === 6) { // 0 - –Ω–µ–¥—ñ–ª—è, 6 - —Å—É–±–æ—Ç–∞
          weekendDays.push(day);
        }
      }
      
      // –î–æ–¥–∞—î–º–æ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è –¥–Ω—ñ–≤ –º—ñ—Å—è—Ü—è
      for (let day = 1; day <= daysInMonth; day++) {
        const th = document.createElement('th');
        th.className = 'day-column' + (weekendDays.includes(day) ? ' weekend' : '');
        th.textContent = day.toString().padStart(2, '0');
        headerRow.appendChild(th);
      }
      
      // –î–æ–¥–∞—î–º–æ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è –ø—ñ–¥—Å—É–º–∫–æ–≤–∏—Ö —Å—Ç–æ–≤–ø—Ü—ñ–≤
      const totalTh = document.createElement('th');
      totalTh.className = 'total-column';
      totalTh.textContent = '–í—Å—å–æ–≥–æ';
      headerRow.appendChild(totalTh);
      
      const paymentTh = document.createElement('th');
      paymentTh.className = 'payment-column';
      paymentTh.textContent = '–î–æ —Å–ø–ª–∞—Ç–∏';
      headerRow.appendChild(paymentTh);
      
      const paidTh = document.createElement('th');
      paidTh.className = 'payment-column';
      paidTh.textContent = '–û–ø–ª–∞—á–µ–Ω–æ';
      headerRow.appendChild(paidTh);
      
      const balanceTh = document.createElement('th');
      balanceTh.className = 'balance-column';
      balanceTh.textContent = '–ó–∞–ª–∏—à–æ–∫';
      headerRow.appendChild(balanceTh);
      
      // –û—á–∏—â–∞—î–º–æ —Ç—ñ–ª–æ —Ç–∞–±–ª–∏—Ü—ñ
      const tbody = table.querySelector('tbody');
      while (tbody.firstChild) {
        tbody.removeChild(tbody.firstChild);
      }
      
      // –î–æ–¥–∞—î–º–æ –ø–µ—Ä—à–∏–π —Ä—è–¥–æ–∫
      addRow();
    }
    
    // –ó–º—ñ–Ω–∞ –º—ñ—Å—è—Ü—è —É –≤–∏–±—ñ—Ä–Ω–∏–∫—É
    function changeMonth() {
      setupTable();
      loadTableData();
    }
    
    // –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
    function updateCalculator() {
      const daysAttended = parseInt(document.getElementById('daysAttended').value) || 0;
      const dailyRate = parseInt(document.getElementById('dailyRate').value) || DAILY_RATE;
      document.getElementById('dailyRateCalc').value = dailyRate;
      document.getElementById('totalPayment').value = daysAttended * dailyRate;
    }
    
    // –û–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—ñ–¥—Å—É–º–∫—ñ–≤ –¥–ª—è —Ä—è–¥–∫–∞
    function updateRowTotals(row) {
      const dailyRate = parseInt(document.getElementById('dailyRate').value) || DAILY_RATE;
      const inputs = row.querySelectorAll('input');
      const nameInput = inputs[0];
      
      // –ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –≤—ñ–¥–≤—ñ–¥–∞–Ω–∏—Ö –¥–Ω—ñ–≤ (–∫—Ä—ñ–º –≤–∏—Ö—ñ–¥–Ω–∏—Ö)
      let attendance = 0;
      let totalDue = 0;
      
      // –ü–µ—Ä–µ–±–∏—Ä–∞—î–º–æ –≤—Å—ñ –¥–Ω—ñ –º—ñ—Å—è—Ü—è
      for (let i = 1; i <= currentMonthDays; i++) {
        const checkbox = inputs[i];
        if (checkbox && checkbox.checked) {
          // –Ø–∫—â–æ —Ü–µ –Ω–µ –≤–∏—Ö—ñ–¥–Ω–∏–π –¥–µ–Ω—å, –≤—Ä–∞—Ö–æ–≤—É—î–º–æ –æ–ø–ª–∞—Ç—É
          if (!weekendDays.includes(i)) {
            attendance++;
            totalDue += dailyRate;
          }
        }
      }
      
      // –Ü–Ω–¥–µ–∫—Å–∏ –ø—ñ–¥—Å—É–º–∫–æ–≤–∏—Ö –ø–æ–ª—ñ–≤
      const totalIndex = currentMonthDays + 1;
      const dueIndex = currentMonthDays + 2;
      const paidIndex = currentMonthDays + 3;
      const balanceIndex = currentMonthDays + 4;
      
      // –û–Ω–æ–≤–ª—é—î–º–æ –ø—ñ–¥—Å—É–º–∫–æ–≤—ñ –ø–æ–ª—è
      inputs[totalIndex].value = attendance;
      inputs[dueIndex].value = totalDue;
      
      // –Ø–∫—â–æ –ø–æ–ª–µ "–û–ø–ª–∞—á–µ–Ω–æ" –∑–∞–ø–æ–≤–Ω–µ–Ω–µ, —Ä–æ–∑—Ä–∞—Ö–æ–≤—É—î–º–æ –∑–∞–ª–∏—à–æ–∫
      const paidAmount = parseInt(inputs[paidIndex].value) || 0;
      inputs[balanceIndex].value = paidAmount - totalDue;
    }
    
    // –û–Ω–æ–≤–ª–µ–Ω–Ω—è –≤—Å—ñ—Ö –ø—ñ–¥—Å—É–º–∫—ñ–≤ —Ç–∞–±–ª–∏—Ü—ñ
    function updateAllTotals() {
      const rows = table.querySelectorAll('tbody tr');
      rows.forEach(row => updateRowTotals(row));
      updateCalculator();
    }
    
    // –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä—è–¥–∫–∞ –¥–ª—è –Ω–æ–≤–æ—ó –¥–∏—Ç–∏–Ω–∏
    function createTableRow() {
      const tr = document.createElement('tr');
      
      // –î–æ–¥–∞—î–º–æ –∫–æ–º—ñ—Ä–∫—É –¥–ª—è —ñ–º–µ–Ω—ñ
      const nameTd = document.createElement('td');
      const nameInput = document.createElement('input');
      nameInput.type = 'text';
      nameInput.placeholder = '–í–≤–µ–¥—ñ—Ç—å —ñ–º\'—è';
      nameTd.appendChild(nameInput);
      tr.appendChild(nameTd);
      
      // –î–æ–¥–∞—î–º–æ –∫–æ–º—ñ—Ä–∫–∏ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –¥–Ω—è –º—ñ—Å—è—Ü—è
      for (let day = 1; day <= currentMonthDays; day++) {
        const td = document.createElement('td');
        if (weekendDays.includes(day)) {
          td.className = 'weekend';
        }
        
        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.dataset.day = day;
        td.appendChild(checkbox);
        tr.appendChild(td);
      }
      
      // –î–æ–¥–∞—î–º–æ –ø—ñ–¥—Å—É–º–∫–æ–≤—ñ –∫–æ–º—ñ—Ä–∫–∏
      // –í—Å—å–æ–≥–æ –¥–Ω—ñ–≤
      const totalTd = document.createElement('td');
      const totalInput = document.createElement('input');
      totalInput.type = 'number';
      totalInput.readOnly = true;
      totalInput.value = '0';
      totalTd.appendChild(totalInput);
      tr.appendChild(totalTd);
      
      // –î–æ —Å–ø–ª–∞—Ç–∏
      const dueTd = document.createElement('td');
      const dueInput = document.createElement('input');
      dueInput.type = 'number';
      dueInput.readOnly = true;
      dueInput.value = '0';
      dueTd.appendChild(dueInput);
      tr.appendChild(dueTd);
      
      // –û–ø–ª–∞—á–µ–Ω–æ
      const paidTd = document.createElement('td');
      const paidInput = document.createElement('input');
      paidInput.type = 'number';
      paidInput.value = '0';
      paidInput.min = '0';
      paidTd.appendChild(paidInput);
      tr.appendChild(paidTd);
      
      // –ó–∞–ª–∏—à–æ–∫
      const balanceTd = document.createElement('td');
      const balanceInput = document.createElement('input');
      balanceInput.type = 'number';
      balanceInput.readOnly = true;
      balanceInput.value = '0';
      balanceTd.appendChild(balanceInput);
      tr.appendChild(balanceTd);
      
      return tr;
    }
    
    // –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ–≥–æ —Ä—è–¥–∫–∞ –≤ —Ç–∞–±–ª–∏—Ü—é
    function addRow() {
      const tbody = table.querySelector('tbody');
      if (tbody.children.length >= MAX_ROWS) {
        alert(`–î–æ—Å—è–≥–Ω—É—Ç–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ä—è–¥–∫—ñ–≤ (${MAX_ROWS})`);
        return;
      }
      
      const newRow = createTableRow();
      tbody.appendChild(newRow);
      updateRowTotals(newRow);
      
      // –î–æ–¥–∞—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ–π –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ä—è–¥–∫–∞
      const inputs = newRow.querySelectorAll('input');
      inputs.forEach(input => {
        if (input.type === 'checkbox') {
          input.addEventListener('change', () => {
            updateRowTotals(newRow);
            saveTableData();
          });
        } else if (!input.readOnly) {
          input.addEventListener('input', () => {
            updateRowTotals(newRow);
            saveTableData();
          });
        }
      });
    }
    
    // –í–∏–¥–∞–ª–µ–Ω–Ω—è –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ —Ä—è–¥–∫–∞
    function removeLastRow() {
      const tbody = table.querySelector('tbody');
      if (tbody.children.length <= 1) {
        alert('–ù–µ–º–æ–∂–ª–∏–≤–æ –≤–∏–¥–∞–ª–∏—Ç–∏ –æ—Å—Ç–∞–Ω–Ω—ñ–π —Ä—è–¥–æ–∫');
        return;
      }
      
      if (confirm('–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ –æ—Å—Ç–∞–Ω–Ω—ñ–π —Ä—è–¥–æ–∫?')) {
        tbody.removeChild(tbody.lastChild);
        saveTableData();
      }
    }
    
    // –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö —Ç–∞–±–ª–∏—Ü—ñ –≤ localStorage
    function saveTableData() {
      const data = [];
      const monthIndex = document.getElementById('monthSelect').value;
      const year = document.getElementById('yearInput').value;
      const dailyRate = document.getElementById('dailyRate').value;
      const rows = table.querySelectorAll('tbody tr');
      
      rows.forEach(row => {
        const inputs = row.querySelectorAll('input');
        const rowData = {
          name: inputs[0].value,
          days: [],
          paid: inputs[currentMonthDays + 3].value
        };
        
        // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –≤—ñ–¥–≤—ñ–¥—É–≤–∞–Ω–Ω—è –ø–æ –¥–Ω—è—Ö
        for (let i = 1; i <= currentMonthDays; i++) {
          rowData.days.push(inputs[i].checked);
        }
        
        data.push(rowData);
      });
      
      // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –≤ localStorage
      const key = `club_attendance_${monthIndex}_${year}`;
      localStorage.setItem(key, JSON.stringify(data));
      localStorage.setItem('club_attendance_settings', JSON.stringify({
        dailyRate: dailyRate
      }));
      
      // –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ —É—Å–ø—ñ—à–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è
      const savedMsg = document.createElement('div');
      savedMsg.textContent = '–î–∞–Ω—ñ –∑–±–µ—Ä–µ–∂–µ–Ω–æ ‚úì';
      savedMsg.style.cssText = 'position: fixed; top: 20px; right: 20px; background-color: #2ecc71; color: white; padding: 10px; border-radius: 5px; box-shadow: 0 2px 10px rgba(0,0,0,0.2);';
      document.body.appendChild(savedMsg);
      
      setTimeout(() => {
        document.body.removeChild(savedMsg);
      }, 2000);
    }
    
    // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö —Ç–∞–±–ª–∏—Ü—ñ –∑ localStorage
    function loadTableData() {
      const monthIndex = document.getElementById('monthSelect').value;
      const year = document.getElementById('yearInput').value;
      const key = `club_attendance_${monthIndex}_${year}`;
      const savedData = JSON.parse(localStorage.getItem(key));
      
      // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å
      const settings = JSON.parse(localStorage.getItem('club_attendance_settings'));
      if (settings) {
        document.getElementById('dailyRate').value = settings.dailyRate;
        document.getElementById('dailyRateCalc').value = settings.dailyRate;
      }
      
      // –Ø–∫—â–æ –Ω–µ–º–∞—î –¥–∞–Ω–∏—Ö, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –ø–æ—Ä–æ–∂–Ω—é —Ç–∞–±–ª–∏—Ü—é
      if (!savedData || !Array.isArray(savedData)) {
        return;
      }
      
      // –û—á–∏—â–∞—î–º–æ —Ç–∞–±–ª–∏—Ü—é —ñ –¥–æ–¥–∞—î–º–æ –ø–æ—Ç—Ä—ñ–±–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ä—è–¥–∫—ñ–≤
      const tbody = table.querySelector('tbody');
      while (tbody.firstChild) {
        tbody.removeChild(tbody.firstChild);
      }
      
      // –î–æ–¥–∞—î–º–æ —Ä—è–¥–∫–∏ –∑ –¥–∞–Ω–∏–º–∏
      savedData.forEach(rowData => {
        const row = createTableRow();
        tbody.appendChild(row);
        
        const inputs = row.querySelectorAll('input');
        inputs[0].value = rowData.name || '';
        
        // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ —á–µ–∫–±–æ–∫—Å–∏
        if (rowData.days && Array.isArray(rowData.days)) {
          rowData.days.forEach((checked, index) => {
            if (index < currentMonthDays) {
              inputs[index + 1].checked = checked;
            }
          });
        }
        
        // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –æ–ø–ª–∞—Ç—É
        inputs[currentMonthDays + 3].value = rowData.paid || 0;
        
        // –û–Ω–æ–≤–ª—é—î–º–æ –ø—ñ–¥—Å—É–º–∫–∏
        updateRowTotals(row);
        
        // –î–æ–¥–∞—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ–π
        inputs.forEach(input => {
          if (input.type === 'checkbox') {
            input.addEventListener('change', () => {
              updateRowTotals(row);
              saveTableData();
            });
          } else if (!input.readOnly) {
            input.addEventListener('input', () => {
              updateRowTotals(row);
              saveTableData();
            });
          }
        });
      });
    }
    
    // –û—á–∏—â–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö
    function clearTableData() {
      if (confirm('–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –æ—á–∏—Å—Ç–∏—Ç–∏ –≤—Å—ñ –¥–∞–Ω—ñ?')) {
        const monthIndex = document.getElementById('monthSelect').value;
        const year = document.getElementById('yearInput').value;
        const key = `club_attendance_${monthIndex}_${year}`;
        localStorage.removeItem(key);
        
        // –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ —Ç–∞–±–ª–∏—Ü—é
        setupTable();
      }
    }
    
    // –ï–∫—Å–ø–æ—Ä—Ç –≤ PDF
    function exportToPDF() {
      const monthIndex = parseInt(document.getElementById('monthSelect').value);
      const year = document.getElementById('yearInput').value;
      const monthNames = [
        '–°—ñ—á–µ–Ω—å', '–õ—é—Ç–∏–π', '–ë–µ—Ä–µ–∑–µ–Ω—å', '–ö–≤—ñ—Ç–µ–Ω—å', '–¢—Ä–∞–≤–µ–Ω—å', '–ß–µ—Ä–≤–µ–Ω—å',
        '–õ–∏–ø–µ–Ω—å', '–°–µ—Ä–ø–µ–Ω—å', '–í–µ—Ä–µ—Å–µ–Ω—å', '–ñ–æ–≤—Ç–µ–Ω—å', '–õ–∏—Å—Ç–æ–ø–∞–¥', '–ì—Ä—É–¥–µ–Ω—å'
      ];
      
      alert(`–ï–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–∏—Ö –∑–∞ ${monthNames[monthIndex]} ${year} –≤ PDF –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –≤ –Ω–∞—Å—Ç—É–ø–Ω—ñ–π –≤–µ—Ä—Å—ñ—ó.

–î–ª—è –µ–∫—Å–ø–æ—Ä—Ç—É –≤ PDF –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏ –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É jsPDF –∞–±–æ —ñ–Ω—à—É –∞–Ω–∞–ª–æ–≥—ñ—á–Ω—É. –í –ø–æ—Ç–æ—á–Ω—ñ–π –≤–µ—Ä—Å—ñ—ó —Ü—è —Ñ—É–Ω–∫—Ü—ñ—è —Å–∏–º—É–ª—é—î—Ç—å—Å—è —Ü–∏–º –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º.`);
    }
    
    // –ó–∞–ø—É—Å–∫–∞—î–º–æ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—é –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
    window.addEventListener('load', initPage);
  </script>
</body>
</html>
